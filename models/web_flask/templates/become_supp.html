<!DOCTYPE html>
<html lang="en">
<head>

 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700&display=swap">
         <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" />
         <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/css/bootstrap-select.min.css" />

<style>

.container {
position: relative;
top: 75px;
}


</style>




</head>



<body>
<form method="POST">
                <!--<input type="text" id="locationinput" value="none"/>-->
        <div class="container" align="center">
	   <h1 align="center">Become a {{items[0]}} Supplier</h1>
            <div class="row">
                <div class="col-md-6">
                    <label>Select City</label>
                    <select name="city" data-live-search="true" id="city" class="form-control" title="Select city" align="center" onchange="updateCity()">
                    {% for k in cities %}
                    <option value="{{k}}">{{k}}</option>
                    {% endfor %}
                    </select>
                </div>
                <div class="col-md-6">
                    <label>Select Sub-city</label>
                    <select name="sub-city" data-live-search="true" id="sub-city" class="form-control" title="Select sub-city" align="center" onchange="updateSubcity()"> </select>

                </div>
                <div class="col-md-6">
                    <label>Select Location</label>
                    <select name="location" data-live-search="true" id="location" class="form-control" title="Select location" align="center" onchange="updateLocation()"> </select>

                </div>

		<div class="col-md-6">
			<label>Select {{ items[0] }} 1</label>
                    <select name="it1" data-live-search="true" id="equipment1" class="form-control" title="Select equipment" align="center">
                            {% for v in items[1] %}
                            <option value={{v}}>{{v}}</option>
                            {% endfor %}
		    </select>
		</div>
		 <div class="col-md-6">
			 <label>Select {{ items[0] }} 2</label>
                    <select name="it2" data-live-search="true" id="eq2" class="form-control" title="Select equipment" align="center">
                            {% for v in items[1] %}
                            <option value={{v}}>{{v}}</option>
                            {% endfor %}
                    </select>
                </div>
		 <div class="col-md-6">
			 <label>Select {{ items[0] }} 3</label>
                    <select name="it3" data-live-search="true" id="equip3" class="form-control" title="Select equipment" align="center">
                            {% for v in items[1] %}
                            <option value={{v}}>{{v}}</option>
                            {% endfor %}
                    </select>
		 </div><br /><br /><br />
		<div style="display: block; float: left;">
		{% for i in range(4) %}
		{% if i > 0 %}
			<div style="display: inline-block;  margin-left: 30px; margin-right: 30px;">
			<div>
				<label>For {{ items[0] }} {{i}}</label>
			</div>
			{% if items[0][0] == 'E' %}
			<div>
			<label>Input number of years used</label>
			</div>
			<input name="it{{i}}-yused" id="item{{i}}yused"/>
			{% endif %}
			<div>
			<label>price in Birr</label>
			</div>
			<input name="it{{i}}-price" id="item{{i}}price"/>
			</div>
		{% endif %} 
		{% endfor %}
		</div><br />
		{% if 'new' in request.path %}
		<div style="margin-top: 100px;">
		<div>
		<label>Contact Info (phone no)</label>
		</div>
		<input name="contactinfo" id="eq1price" value="none"/>
		</div>
		{% endif %}
		<div>
                       <input type="hidden" id="cityinput"/>                <input type="hidden" id="subcityinput" value="none"/>
                <input type="hidden" id="locationinput" value="none"/>
		<input type="hidden" id="equipmentinput1" value="none"/>
		   
		<input type="hidden" id="equipmentinput2" value="none"/>
		<input type="hidden" id="equipmentinput3" value="none"/>
		     </div>
                     
                   <div style="position:absolute; left:650px; top:450px;" align="center">
                <button type="submit" class="btn btn-primary">Submit</button>
                </div>
	    </div>
	</div>
                <!--<input type="submit" value="Submit" name="Submit"/>-->
        </form>
         <script>
        function updateCity() {
          let val = document.getElementById("city").value
          document.getElementById("cityinput").value = val;
        }

        function updateSubcity() {
	  let val = document.getElementById("sub-city").value
                const res = val.split("/");
                document.getElementById("subcityinput").value = res[1];
        }

        function updateLocation() {
          let val = document.getElementById("location").value
          document.getElementById("locationinput").value = val;
        }
	

	
	

	/*var select = document.getElementById("equipment");
	var input = document.getElementById("equipmentinput");
	select.addEventListener("change", function(event) {
	    const selected = document.querySelectorAll('#equipment option:checked');
	    const values = Array.from(selected).map(el => el.value);
	    input.value = values.join(', ');*/
	})

        </script>

        <!--<button type="submit" class="btn btn-primary">Submit</button>-->

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/js/bootstrap-select.min.js"></script>
        <script>
            $(document).ready(function () {
                $("#city").selectpicker();

                $("#sub-city").selectpicker();

                $("#location").selectpicker();

                $("#equipment1").selectpicker();

                $("#eq2").selectpicker();

                $("#equip3").selectpicker();



                function load_data(url, type, place) {
                    $.ajax({
                        url: url,
                        method: "POST",
                        data: { type: type, place: place },
                        dataType: "json",
                        success: function (res) { //alert(category_id)
                            var html = "";
                            for (var count = 0; count < res.length; count++) {

                                if (type == "subcityData")
                                html += '<option value="' + place + '/' + res[count] + '">' + res[count] + "</option>";
                                else
                                html += '<option value="' + res[count] + '">' + res[count] + "</option>";
                            }
                            if (type == "cityData") {
                               $("#city").html(html);
                                $("#city").selectpicker("refresh");
                            } if (type == "subcityData") {
                                $("#sub-city").html(html);
                                $("#sub-city").selectpicker("refresh");
                            }
                              if (type == "locationData") {
                                $("#location").html(html);
                                $("#location").selectpicker("refresh");
                            }
                        },
                    });
                }

                $(document).on("change", "#city", function () {
                   var city_name = $("#city").val();
                   load_data('/city', "subcityData", city_name);
                });
                $(document).on("change", "#sub-city", function () {
                    var subcity_name = $("#sub-city").val();
                    load_data('/sub-city', "locationData", subcity_name);
                });


            });
        </script>

</body>
</html>
